"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19612],{701357:function(e,t,r){r.d(t,{w:function(){return b}});var n,a,i=r(456552),o=r(865051),l=r(74186),u=r(221527),c=r(951730);function s(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var f=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},d=(n=function(e,t){var r,n,a,i,l,u=arguments;return f(this,function(c){switch(c.label){case 0:return r=e.email,n=e.systemCountry,a=e.origin_metadata,i=e.locale,l=e.parentSpan,[4,(u.length>2&&void 0!==u[2]?u[2]:o.Z)("/api/newsletter/subscription/".concat(r),t,{query:{country:n.toLowerCase(),locale:i},headers:{"Content-Type":"application/json"},method:"POST",data:{origin_metadata:a},parentSpan:l})];case 1:return[4,c.sent().text()];case 2:return[2,c.sent()]}})},a=function(){var e=this,t=arguments;return new Promise(function(r,a){var i=n.apply(e,t);function o(e){s(i,r,a,o,l,"next",e)}function l(e){s(i,r,a,o,l,"throw",e)}o(void 0)})},function(e,t){return a.apply(this,arguments)}),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.Z)().fetch,r=(0,u.O)(),n=[c.Z["newsletter.subscribe"]];return(0,i.useMutation)(function(e){return d(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r,e),n,t)},e)}},619612:function(e,t,r){r.r(t),r.d(t,{FeaturePlayground:function(){return K},LeadBarFeature:function(){return V},metadata:function(){return z},middlewares:function(){return J}});var n,a,i=r(687800),o=r(827378),l=r(546795),u=r(334765),c=r(567942);function s(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var f=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},d=(0,c.Z)("lead-bar-feature-config",(n=function(){return f(this,function(e){switch(e.label){case 0:return[4,r.e(70524).then(r.bind(r,970524))];case 1:return[2,e.sent()]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var i=n.apply(e,t);function o(e){s(i,r,a,o,l,"next",e)}function l(e){s(i,r,a,o,l,"throw",e)}o(void 0)})})),b=d.ProjectConfigProvider,p=d.configMiddleware,h=d.useConfig,m=r(567921),y=r.n(m),g=r(718583),v=r(686677),Z=r(779264),w=r(797560),S=r(427795),x=r(701357),E=r(233169),C=r(815026),A=r(136943);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t=e.onSubmitEmail,r=e.isError,n=T((0,o.useState)(!0),2),a=n[0],l=n[1],u=T((0,o.useState)(""),2),c=u[0],s=u[1],f=(0,S.Z)("features.lead-bar"),d=f.translate,b=f.translateRaw,p=function(e){l(!(e&&new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i).test(e)))};return(0,i.BX)(Z.Z,{display:"flex",paddingTop:["sm-1","md-1"],paddingBottom:["sm-1","lg-1"],width:"100%",maxWidth:"500px",justifyContent:"center",flexWrap:"wrap",children:[(0,i.tZ)(C.Z,{width:"50%",id:"txtEmailAddress",labelText:b("features.lead-bar.capture-email.enter-email-address"),children:(0,i.tZ)(C.Z.TextInput,{type:"email",onChange:function(e){var t=e.target.value;p(t),s(t)},placeholder:b("features.lead-bar.capture-email.enter-email-address"),value:c})}),(0,i.tZ)(Z.Z,{display:["none","inline"],children:(0,i.tZ)(Z.Z,{ml:"xs",children:(0,i.tZ)(A.Z.Primary,{"data-test-id":"subscribe-button",disabled:a,onClick:function(){return t(c)},children:d("features.lead-bar.capture-email.subscribe")})})}),(0,i.tZ)(Z.Z,{display:["inline","none"],children:(0,i.tZ)(Z.Z,{ml:"xs",children:(0,i.tZ)(A.Z.Primary,{"data-test-id":"subscribe-button-mobile",disabled:a,onClick:function(){return t(c)},children:d("features.lead-bar.capture-email.subscribe-mobile")})})}),r&&(0,i.tZ)(Z.Z,{marginTop:"xxs",children:(0,i.tZ)(w.Z,{as:"p",children:d("features.lead-bar.capture-email.error-occurred-while-subscribing")})})]})},k=function(){var e=(0,S.Z)("features.lead-bar").translate;return(0,i.tZ)(Z.Z,{display:"flex",flexDirection:"column",alignItems:"center",padding:["xs","sm-2"],borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:"neutral.400",children:(0,i.tZ)(w.Z,{type:"body-sm-regular",color:"success.500",children:e("features.lead-bar.capture-email.thanks-for-subscribing")})})},j=r(40412),I=r.n(j);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t,r=e.section,n=e.children,a=function(e){if(Array.isArray(e))return e}(t=(0,o.useState)(!1))||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=a[0],u=a[1],c=(0,E.Z)().push;return(0,i.tZ)(I(),{onChange:function(e){e&&!l&&(c({event:"gaEventTrigger",event_name:"Navigation_Scroll",gaEventCategory:"navigation",gaEventLabel:r,gaEventNonInteraction:!0,gaEventAction:"scroll",position:r}),u(!0))},active:!l,minTopValue:100,partialVisibility:!0,children:n})},R=r(611691),q=r(479231),N=r(101518);function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={helloshare:["share","raf-share"],freebie:!0},D={freebie:!0},G=(U(a={},q.Z.DE,B),U(a,q.Z.AU,B),U(a,q.Z.NZ,B),U(a,q.Z.IT,B),U(a,q.Z.AT,B),U(a,q.Z.CH,B),U(a,q.Z.CA,B),U(a,q.Z.ES,B),U(a,q.Z.US,D),U(a,q.Z.GB,D),U(a,q.Z.BE,D),U(a,q.Z.NL,D),U(a,q.Z.LU,D),U(a,q.Z.SE,D),U(a,q.Z.DK,D),U(a,q.Z.FR,D),U(a,q.Z.IE,{}),U(a,q.Z.JP,{}),U(a,q.Z.NO,{}),a),M=function(){var e,t,r=(0,N.Z)(),n=(null===(e=(0,v.useRouter)().query.utm_source)||void 0===e?void 0:e.toString().toLowerCase())||"",a=G[r]||{},i=null===(t=a.helloshare)||void 0===t?void 0:t.includes(n),o=a.freebie&&n.includes("freebie");return i||o},F=function(){var e=(0,v.useRouter)().pathname,t=h().isSinglePlansPageEnabled,r="mobile"===(0,R.S)(),n=M();return t&&r&&("/legacy/funnel-fragment/plans"===e||"/whitelabel/plans"===e)&&!n};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(){var e=$((0,o.useState)(!1),2),t=e[0],r=e[1],n=$((0,o.useState)(""),2),a=n[0],l=n[1],u=$((0,o.useState)(""),2),c=u[0],s=u[1],f=(0,v.useRouter)(),d=f.query,b=f.asPath,p=(0,E.Z)().push,m=(0,S.Z)("features.lead-bar").translate,C=(0,o.useMemo)(function(){return y().get("hf_leadgen_email")},[]),A=h(),P=A.locations,T=A.hiddenLocations,j=F();(0,o.useEffect)(function(){return l(g.ZP.getItem("StoredCouponCode")||"")},[]);var I=!a&&!d.c&&!C,_=(0,x.w)(),R=_.mutate,q=_.isSuccess,N=_.isError;return((0,o.useEffect)(function(){q&&p({event:"gaEventTrigger",event_name:"Navigation_FooterLeadGenSuccess",gaEventCategory:"navigation",gaEventAction:"leadGen|footer",gaEventLabel:"success",position:"leadGen|footer"})},[q,p]),(0,o.useEffect)(function(){s(b.split("?")[0])},[b]),(0,o.useEffect)(function(){var e=P.some(function(e){return e===c}),t=T.some(function(e){return e===f.asPath});r(I&&e&&!t&&!j)},[I,T,P,c,f.asPath,j,q,N]),t)?(0,i.tZ)(L,{section:"stay-updated",children:(0,i.BX)(Z.Z,{display:"flex",flexDirection:"column",alignItems:"center",padding:["xs","sm-1"],borderTopWidth:"1px",borderTopStyle:"solid",borderTopColor:"neutral.400","data-test-id":"lead-bar-new",textAlign:"center",children:[(0,i.tZ)(w.Z,{as:"h2",my:"sm-2",children:m("features.lead-bar.capture-email.title")}),(0,i.tZ)(w.Z,{as:"p",children:m("features.lead-bar.capture-email.description")}),!q&&(0,i.tZ)(O,{onSubmitEmail:function(e){p({event:"gaEventTrigger",gaEventCategory:"navigation",gaEventAction:"leadGen|footer",gaEventLabel:"submit"}),R({email:e,origin_metadata:{origin:"website_signupbar",source:"",medium:"",campaign:"",content:"",term:"",jtbd:"",path:c,timestamp:"".concat(new Date().toISOString().slice(0,-5),"Z")}}),y().set("hf_leadgen_email",e,{expires:365})},isError:N}),q&&(0,i.tZ)(k,{})]})}):null},V=function(){return(0,i.tZ)(u.Z,{claim:{name:"curation",githubTeam:"hellofresh/squad-curation",tribe:"conversions-us",alliance:"growth",jiraPrefix:"USCRO",slackChannel:"#squad-curation",slackAlertsChannel:"#squad-curation",skipLabelsOnPR:!1,teamIdentifier:"curation"},children:(0,i.tZ)(l.Z,{scope:"leadbar",children:(0,i.tZ)(b,{children:(0,i.tZ)(X,{})})})})},H=r(487249),J=[p,r.n(H)()(["features.lead-bar"])],K=function(){return(0,i.BX)(Z.Z,{display:"flex",alignItems:"center",flexDirection:"column",children:[(0,i.tZ)(Z.Z,{my:"md-1",children:(0,i.tZ)(w.Z,{type:"body-xxl-bold",children:"Lead bar Feature"})}),(0,i.tZ)(Z.Z,{width:"100%",children:(0,i.tZ)(V,{})})]})},z={claim:{name:"curation",githubTeam:"hellofresh/squad-curation",tribe:"conversions-us",alliance:"growth",jiraPrefix:"USCRO",slackChannel:"#squad-curation",slackAlertsChannel:"#squad-curation",skipLabelsOnPR:!1,teamIdentifier:"curation"},status:"Complete",description:"This feature is a lead bar component that has the purpose of allowing users to subscribe to a newsletter. It contains a form with an email input and a submit button."}}}]);