"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75923],{136251:function(e,r,t){t.d(r,{c:function(){return O},v:function(){return h}});var n,o,u=t(456552),a=t(865051),c=t(74186),i=t(221527),l=t(951730);function f(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){t(e);return}c.done?r(i):Promise.resolve(i).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var u=e.apply(r,t);function a(e){f(u,n,o,a,c,"next",e)}function c(e){f(u,n,o,a,c,"throw",e)}a(void 0)})}}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}function y(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function d(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)t=u[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)t=u[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var m=function(e,r){var t,n,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},b=(n=s(function(e,r){var t,n,o,u=arguments;return m(this,function(c){switch(c.label){case 0:return t=u.length>2&&void 0!==u[2]?u[2]:a.Z,n=e.systemCountry,[4,t("/calculate/batch",r,{method:"POST",data:y(p({},o=d(e,["systemCountry"])),{country:n.toUpperCase()}),parentSpan:o.parentSpan})];case 1:return[2,c.sent().json()]}})}),function(e,r){return n.apply(this,arguments)}),v=(o=s(function(e,r){var t,n,o,u=arguments;return m(this,function(c){switch(c.label){case 0:return t=u.length>2&&void 0!==u[2]?u[2]:a.Z,n=e.systemCountry,[4,t("/calculate",r,{method:"POST",data:y(p({},o=d(e,["systemCountry"])),{country:n.toUpperCase()}),parentSpan:o.parentSpan})];case 1:return[2,c.sent().json()]}})}),function(e,r){return o.apply(this,arguments)}),h=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)().fetch,n=(0,i.O)(),o=[l.Z["calculate.calculatePrices"],e];return(0,u.useQuery)(o,function(){return v(p({},e,n),o,t)},r)},O=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)().fetch,n=(0,i.O)(),o=[l.Z["calculate.calculatePrices"],e];return(0,u.useQuery)(o,function(){return b(p({},e,n),o,t)},r)}},486570:function(e,r,t){t.d(r,{P:function(){return p}});var n,o,u=t(865051),a=t(74186),c=t(456552),i=t(951730);function l(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){t(e);return}c.done?r(i):Promise.resolve(i).then(n,o)}var f=function(e,r){var t,n,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},s=(n=function(e,r){var t,n,o,a=arguments;return f(this,function(c){switch(c.label){case 0:return t=a.length>2&&void 0!==a[2]?a[2]:u.Z,n=e.id,o=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)t=u[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)t=u[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["id"]),[4,t("/cart/".concat(n),r,{parentSpan:o.parentSpan})];case 1:return[2,c.sent().json()]}})},o=function(){var e=this,r=arguments;return new Promise(function(t,o){var u=n.apply(e,r);function a(e){l(u,t,o,a,c,"next",e)}function c(e){l(u,t,o,a,c,"throw",e)}a(void 0)})},function(e,r){return o.apply(this,arguments)}),p=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,a.Z)().fetch,n=[i.Z["cart.byId"],e];return(0,c.useQuery)(n,function(){return s(e,n,t)},r)}},286055:function(e,r,t){t.d(r,{m:function(){return h}});var n,o,u=t(827378),a=t(456552),c=t(566158),i=t(601e3),l=t(865051),f=t(74186),s=t(221527),p=t(951730);function y(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){t(e);return}c.done?r(i):Promise.resolve(i).then(n,o)}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}function m(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var b=function(e,r){var t,n,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},v=(n=function(e,r){var t,n,o,u,a=arguments;return b(this,function(c){switch(c.label){case 0:return t=a.length>2&&void 0!==a[2]?a[2]:l.Z,n=e.systemCountry,o=e.locale,u=e.parentSpan,[4,t("/cart/items",r,{method:"POST",query:{country:n,locale:o},data:m(d({},function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)t=u[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)t=u[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["systemCountry","locale","parentSpan"])),{country:n}),parentSpan:u})];case 1:return[2,c.sent().json()]}})},o=function(){var e=this,r=arguments;return new Promise(function(t,o){var u=n.apply(e,r);function a(e){y(u,t,o,a,c,"next",e)}function c(e){y(u,t,o,a,c,"throw",e)}a(void 0)})},function(e,r){return o.apply(this,arguments)}),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.useQueryClient)(),t=(0,s.O)(),n=(0,f.Z)().fetch,o=(0,u.useRef)(),l=(0,c.T)();return(0,a.useMutation)(function(e){var r;if(o.current=l.startSpan("data-access.create-cart"),o.current.setAttribute("voucherCode",e.voucher||"undefined"),null==e?void 0:null===(r=e.items)||void 0===r?void 0:r.length){var u,a,c,i,f=null===(u=e.items)||void 0===u?void 0:u[0],s=(null===(a=f.metadata)||void 0===a?void 0:a.presets)||[];o.current.setAttribute("sku",f.sku),o.current.setAttribute("mealsPreset",(null===(c=f.metadata)||void 0===c?void 0:c.mealsPreset)||"undefined"),o.current.setAttribute("productFamily",(null===(i=f.metadata)||void 0===i?void 0:i.productFamily)||"undefined"),o.current.setAttribute("presets",s.join("|")),o.current.setAttribute("presetsCount",s.length)}return v(d({},e,t),[p.Z["cart.createCart"]],n)},m(d({},e),{onSuccess:function(t,n,u){var a=[p.Z["cart.byId"],{id:t.id}];r.setQueryData(a,t),o.current&&(o.current.setAttribute("cartId",t.id),o.current.end()),"function"==typeof e.onSuccess&&e.onSuccess(t,n,u)},onError:function(r,t,n){o.current&&(o.current.setStatus({message:r.message,code:i.Z.ERROR}),o.current.end()),"function"==typeof e.onError&&e.onError(r,t,n)}}))}},152085:function(e,r,t){t.d(r,{D:function(){return y}});var n,o,u=t(456552),a=t(865051),c=t(74186),i=t(221527),l=t(951730);function f(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){t(e);return}c.done?r(i):Promise.resolve(i).then(n,o)}var s=function(e,r){var t,n,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},p=(n=function(e,r){var t,n,o,u=arguments;return s(this,function(c){switch(c.label){case 0:if(t=u.length>2&&void 0!==u[2]?u[2]:a.Z,n=e.parentSpan,!(o=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)t=u[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)t=u[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["parentSpan"])).code)return[2,{}];return[4,t("/vouchers/".concat(o.code),r,{method:"GET",query:{country:o.systemCountry,locale:o.locale},parentSpan:n})];case 1:return[2,c.sent().json()]}})},o=function(){var e=this,r=arguments;return new Promise(function(t,o){var u=n.apply(e,r);function a(e){f(u,t,o,a,c,"next",e)}function c(e){f(u,t,o,a,c,"throw",e)}a(void 0)})},function(e,r){return o.apply(this,arguments)}),y=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)().fetch,n=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}({},e,(0,i.O)()),o=[l.Z["voucher.info"],n];return(0,u.useQuery)(o,function(){return p(n,o,t)},r)}},897681:function(e,r,t){t.d(r,{ZP:function(){return A},iQ:function(){return E}});var n=t(687800),o=t(827378),u=t(567921),a=t.n(u),c=t(486570),i=t(686677),l=t(718583),f=t(566158),s=t(601e3),p=t(286055),y=t(818892),d=t(969860),m=t(449279),b=function(){var e,r,t=(0,i.useRouter)(),n=t.query.isFromPlanRecommendation,o=t.query.preferenceStatus,u=t.query.featured;return{shouldUsePresetFromQuery:"true"===n&&"selected"===o,presetsFromQuery:(null===(e=null==u?void 0:u.split(":"))||void 0===e?void 0:null===(r=e[1])||void 0===r?void 0:r.split(","))||[]}};function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var h=function(){var e,r,t=(0,i.useRouter)(),n=(0,f.T)(),u=(0,d.Sc)(),c=u.defaultMealsPreset,h=u.defaultPresets,O=(0,p.m)().mutate,S=function(e){if(Array.isArray(e))return e}(e=(0,o.useState)(null))||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var u=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(u.push(t.value),!r||u.length!==r);a=!0);}catch(e){c=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw n}}return u}}(e,2)||function(e,r){if(e){if("string"==typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,r)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=S[0],P=S[1],C=null!==(r=(0,o.useMemo)(function(){return l.ZP.getItem("StoredCouponCode")},[]))&&void 0!==r?r:"",w=t.query.c||C,j=b(),E=j.shouldUsePresetFromQuery,A=j.presetsFromQuery,Z=(0,m.r)();return{createCartData:g,createCart:(0,o.useCallback)(function(e,r){var t=n.startSpan("cart-provider.create-cart");e&&r&&O({voucher:w,items:[{quantity:1,sku:e,metadata:{mealsPreset:E?Z(A,e):c,timestamp:Date.now(),presets:E?A:h,productFamily:r||""}}]},{onSuccess:function(r){t.setStatus({message:"cart created",code:s.Z.OK}),t.end(),P(r),a().set(y.Hc,e),a().set(y.KQ,r.id,{expires:30})},onError:function(e){t.setStatus({message:e.message,code:s.Z.ERROR}),t.end()}})},[c,h,O,P,n,w])}},O=t(764688),S=t(546795);function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var P=function(e,r){var t,n=function(e){if(Array.isArray(e))return e}(t=(0,o.useState)(!1))||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var u=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(u.push(t.value),!r||u.length!==r);a=!0);}catch(e){c=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw n}}return u}}(t,2)||function(e,r){if(e){if("string"==typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,r)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=n[0],a=n[1];(0,o.useEffect)(function(){var t=function(){"visible"===document.visibilityState&&e&&u?(r(),a(!1)):a(!0)};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}},[e,r,u])};function C(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var u=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(u.push(t.value),!r||u.length!==r);a=!0);}catch(e){c=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw n}}return u}}(e,r)||function(e,r){if(e){if("string"==typeof e)return C(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=(0,o.createContext)({}),E=function(){return(0,o.useContext)(j)},A=function(e){var r,t,u=e.children,i=(0,O.Z)(),l=i.planFamily,f=i.defaultSku,s=h(),p=s.createCartData,d=s.createCart,m=w((0,o.useState)(null),2),b=m[0],v=m[1],g=w((0,o.useState)(null),2),C=g[0],E=g[1],A=(0,c.P)({id:b},{suspense:!1,enabled:!!b}),Z=A.data,k=A.refetch;P(b,k),(0,o.useEffect)(function(){b||v(a().get(y.KQ))},[b]),(0,o.useEffect)(function(){void 0===b&&f&&(null==l?void 0:l.handle)&&d(f,l.handle)},[b,C,f,null==l?void 0:l.handle,d]),(0,o.useEffect)(function(){Z&&(E(Z),v(Z.id))},[Z]),(0,o.useEffect)(function(){p&&(E(p),v(p.id))},[p]);var x=w((0,o.useState)(!1),2),N=x[0],U=x[1],R=function(){return U(function(e){return!e})};return(0,n.tZ)(S.Z,{scope:"cartProvider",children:(0,n.tZ)(j.Provider,{value:C?(r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}({},C),t=t={isCartOpen:N,toggleCartOpen:R},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}),r):{isCartOpen:N,toggleCartOpen:R},children:u})})}},969860:function(e,r,t){t.d(r,{Gi:function(){return i},Sc:function(){return l}});var n,o=t(567942);function u(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){t(e);return}c.done?r(i):Promise.resolve(i).then(n,o)}var a=function(e,r){var t,n,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},c=(0,o.Z)("hf.funnel.cart",(n=function(){return a(this,function(e){switch(e.label){case 0:return[4,t.e(21342).then(t.bind(t,921342))];case 1:return[2,e.sent().config]}})},function(){var e=this,r=arguments;return new Promise(function(t,o){var a=n.apply(e,r);function c(e){u(a,t,o,c,i,"next",e)}function i(e){u(a,t,o,c,i,"throw",e)}c(void 0)})})),i=c.ProjectConfigProvider,l=(c.configMiddleware,c.useConfig)},818892:function(e,r,t){t.d(r,{Hc:function(){return o},KQ:function(){return n},Z9:function(){return u}});var n="hf_cart_id",o="hf_ssr_stored_sku",u="thermomixActive"},764688:function(e,r,t){var n=t(827378),o=t(718583),u=t(58316),a=t(101518),c=t(479231),i=t(862197),l=t(440163),f=t(566158),s=t(625821),p=t(897681),y=t(818892);function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function m(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var u=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(u.push(t.value),!r||u.length!==r);a=!0);}catch(e){c=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw n}}return u}}(e,r)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e,r){for(var t in r){if(!r.hasOwnProperty(t))return;var n=r[t];if(n.config&&(n.config.familyName===e||n.config.thermomixFamilyName===e))return n}};r.Z=function(){var e,r,t,d,v,h=arguments.length>0&&void 0!==arguments[0]&&arguments[0],O=(0,i.o)(),S=(0,a.Z)(),g=(0,f.T)(),P=m((0,s.Z)(),1)[0],C=(0,p.iQ)(),w="1"===O.hf_ssr_e_gift_card_checkout,j=S===c.Z.US&&"1"===O.hf_ssr_e_plans_config_is_freebie,E=(0,n.useRef)(g.startSpan("fetch-plans-config-with-product-family-handle")),A=(null==P?void 0:P.familyHandle)||(null==C?void 0:null===(e=C.items)||void 0===e?void 0:null===(r=e[0])||void 0===r?void 0:null===(t=r.metadata)||void 0===t?void 0:t.productFamily),Z=(0,l.s)().isPrimeCustomer,k=(0,u.f)({include:"plans,preferences",giftCard:w,isFreebie:j},{suspense:h}),x=k.data,N=k.isFetching,U=k.isSuccess,R=(0,n.useMemo)(function(){if(U&&A)return b(A,Z?x.amazon:x)},[U,A,x,Z]);(0,n.useEffect)(function(){if(U&&"__NULL__"!==A){var e,r;null===(e=E.current)||void 0===e||e.setAttributes({productFamily:A,plansConfigProductFamilyAvailable:!!R,isGiftCard:w,freebie:j}),null===(r=E.current)||void 0===r||r.end(),E.current=null}},[E,U,j,w,R,A]);var D=null==R?void 0:R.plans,_=null==R?void 0:R.plans[0],F=null==R?void 0:null===(d=R.plans)||void 0===d?void 0:d[1],I=(null==R?void 0:R.config.preferences)||[],T=(null==R?void 0:R.config.defaultSku)||"",W=(null==R?void 0:R.preferences)||[],L=null==R?void 0:R.config.multiplePreferences,M=null==_?void 0:_.children.map(function(e){return e.handle}),K=(null==F?void 0:F.children.map(function(e){return e.handle}))||[],Q=K?null==M?void 0:M.concat(K):M,G=null==R?void 0:R.config.thermomixFamilyName;G&&D&&(v=D.find(function(e){return e.handle===G}));var $=!!G&&"true"===o.ZP.getItem(y.Z9),q=m(null==T?void 0:T.split("-"),4),H=q[2],B=q[3],V=Number(H)||3,Y=Number(B)||2,z=(null==L?void 0:L.maxNumberOfPreferences)||6;return{defaultSku:T,defaultMeals:V,defaultSize:Y,isFetching:N,isPlansConfigFetched:U,isProductFamilyDone:U&&"__NULL__"!==A,multiplePreferences:L,planFamily:$?v:_,preferences:I,presets:W,products:M,thermomixProducts:K,classicAndThermomixProducts:Q,plansConfigThermomixPlan:v,MAX_NUM_OF_PRESETS:z,plansConfigProductFamily:R,productFamily:A}}},449279:function(e,r,t){function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}t.d(r,{r:function(){return i}});var o=function(e,r){var t,o,u=(function(e){if(Array.isArray(e))return e}(t=null==e?void 0:e.split("-"))||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var u=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(u.push(t.value),!r||u.length!==r);a=!0);}catch(e){c=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw n}}return u}}(t,3)||function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,r)}}(t,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[2];return null===(o=r.find(function(e){return e.maxDefault<Number(u)}))||void 0===o?void 0:o.handle},u=function(e){var r=e.firstPreference,t=e.sku,n=e.multiplePreferences;return r===o(t,e.presets)?null==n?void 0:n.maxDefaultFallbackPreference:r},a=function(e){var r=e.selectedPreferences,t=e.preferences,n=e.multiplePreferences,o=e.sku,a=e.presets,c=r[0];if(0===r.length)return null==t?void 0:null===(p=t[0])||void 0===p?void 0:p.preferenceName;if(!(null==n?void 0:n.preferencesPriorities))return u({firstPreference:c,sku:o,multiplePreferences:n,presets:a});var i="",l=!0,f=!1,s=void 0;try{for(var p,y,d=(null==n?void 0:n.preferencesPriorities)[Symbol.iterator]();!(l=(y=d.next()).done);l=!0){var m=function(){var e=y.value;if(i=r.find(function(r){return r===e})||"")return"break"}();if("break"===m)break}}catch(e){f=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(f)throw s}}return i||(i=u({firstPreference:c,sku:o,multiplePreferences:n,presets:a})),u({firstPreference:i,sku:o,multiplePreferences:n,presets:a})},c=t(764688),i=function(){var e=(0,c.Z)(),r=e.preferences,t=e.multiplePreferences,n=e.presets;return function(e,o){return a({selectedPreferences:e,sku:o,preferences:r,multiplePreferences:t,presets:n})}}},983720:function(e,r){var t,n;(n=t||(t={})).DOLLAR="$",n.POUND="\xa3",n.EURO="â‚¬",n.CHF="CHF",n.KRONA="kr",n.YEN="\xa5",r.Z=t},552141:function(e,r,t){t.d(r,{xG:function(){return f},uf:function(){return c},E8:function(){return s},SX:function(){return p}});var n=t(732556),o=t(983720),u={decimalSeparator:".",numberSeparator:",",currencyCode:"GBP",formatNumberWithCurrency:function(e){return"".concat(o.Z.POUND).concat(e)}},a={US:{decimalSeparator:".",numberSeparator:",",currencyCode:"USD",formatNumberWithCurrency:function(e){return"".concat(o.Z.DOLLAR).concat(e)}},CA:{decimalSeparator:".",numberSeparator:",",currencyCode:"CAD",formatNumberWithCurrency:function(e){return"".concat(o.Z.DOLLAR).concat(e)}},"FR-CA":{decimalSeparator:",",numberSeparator:".",currencyCode:"CAD",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.DOLLAR)}},GB:u,UK:u,AU:{decimalSeparator:".",numberSeparator:",",currencyCode:"AUD",formatNumberWithCurrency:function(e){return"".concat(o.Z.DOLLAR).concat(e)}},NZ:{decimalSeparator:".",numberSeparator:",",currencyCode:"NZD",formatNumberWithCurrency:function(e){return"".concat(o.Z.DOLLAR).concat(e)}},DE:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.EURO)}},AT:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(o.Z.EURO," ").concat(e)}},BE:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.EURO)}},"NL-BE":{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(o.Z.EURO," ").concat(e)}},NL:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(o.Z.EURO," ").concat(e)}},FR:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.EURO)}},LU:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.EURO)}},CH:{decimalSeparator:".",numberSeparator:"'",currencyCode:"CHF",formatNumberWithCurrency:function(e){return"".concat(o.Z.CHF," ").concat(e)}},SE:{decimalSeparator:",",numberSeparator:" ",currencyCode:"SEK",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.KRONA)}},DK:{decimalSeparator:",",numberSeparator:" ",currencyCode:"DKK",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.KRONA,".")}},NO:{decimalSeparator:",",numberSeparator:" ",currencyCode:"NOK",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.KRONA)}},IT:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.EURO)}},JP:{decimalSeparator:".",numberSeparator:",",currencyCode:"JPY",formatNumberWithCurrency:function(e){return"".concat(o.Z.YEN).concat(e)}},IE:{decimalSeparator:".",numberSeparator:",",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(o.Z.EURO).concat(e)}},ES:{decimalSeparator:",",numberSeparator:".",currencyCode:"EUR",formatNumberWithCurrency:function(e){return"".concat(e," ").concat(o.Z.EURO)}}},c=function(e,r){var t=r.decimals;t="number"==typeof t?t:parseInt(t,10);var n=(e/100).toFixed(t);return 0===Number(n)&&(n=Math.max(Number(n),0).toFixed(t)),n},i=function(e,r){var t=r.currencyInfo,n=r.decimals;if(!t)return e;var o=RegExp("\\d(?=(\\d{3})+".concat(n>0?"\\D":"$",")"),"g");return e.replace(".",t.decimalSeparator).replace(o,"$&".concat(t.numberSeparator))},l=function(e){return e},f=function(e,r){var t=r.country,n=r.locale,o=r.decimals,u=void 0===o?2:o,f=a[(void 0===n?"":n).toUpperCase()]||a[t.toUpperCase()],s=i(c(e,{decimals:u}),{currencyInfo:f,decimals:u});return((f||{}).formatNumberWithCurrency||l)(s)},s=function(e){return a[e.toUpperCase()].currencyCode},p=function(){return a[(0,n.Z)().toUpperCase()].currencyCode||a.US.currencyCode}},914043:function(e,r,t){var n=t(827378),o=t(686677),u=t(718583),a=t(152085),c=t(589233);function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var u=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(u.push(t.value),!r||u.length!==r);a=!0);}catch(e){c=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw n}}return u}}(e,r)||function(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.Z=function(e){var r,t=e.voucherCode,i=l((0,n.useState)(!1),2),f=i[0],s=i[1],p=l((0,n.useState)({}),2),y=p[0],d=p[1],m=(0,o.useRouter)().query,b=(0,n.useMemo)(function(){return u.ZP.getItem("StoredCouponCode")},[]),v=null!==(r=t||m.c||b)&&void 0!==r?r:"",h=(0,a.D)({code:v},{suspense:!1}).data,O=v&&"undefined"!==v?!!h:null;return(0,n.useEffect)(function(){var e,r,t=null==h?void 0:null===(e=h.discount_settings)||void 0===e?void 0:null===(r=e.additional_discounts)||void 0===r?void 0:r.find(function(e){return e.benefit_category===c.xo}),n=Object.keys((null==t?void 0:t.box_rule)||{}).length,o=(null==t?void 0:t.lifetime)===c.mu;s(!!t),d({isLifetime:o,numOfFreeWeeks:n})},[null==h?void 0:h.discount_settings]),{isFreeAddonVoucher:f,freeAddonVoucherDetails:y,isVoucherDataFetched:O}}},625821:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(37017),o=(0,n.cn)({}),u=function(){return(0,n.KO)(o)}}}]);