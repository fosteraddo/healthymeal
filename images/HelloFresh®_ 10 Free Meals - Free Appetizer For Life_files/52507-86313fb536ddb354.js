"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52507],{58316:function(e,t,n){n.d(t,{f:function(){return d}});var o,r,a=n(456552),i=n(865051),u=n(74186),c=n(221527),l=n(951730);function s(e,t,n,o,r,a,i){try{var u=e[a](i),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(o,r)}var f=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},v=(o=function(e,t){var n,o,r,a,u,c,l,s,v=arguments;return f(this,function(f){switch(f.label){case 0:return n=e.include,o=e.locale,r=e.systemCountry,a=e.parentSpan,c=void 0!==(u=e.giftCard)&&u,s=void 0!==(l=e.isFreebie)&&l,[4,(v.length>2&&void 0!==v[2]?v[2]:i.Z)("/plans-config/v2/1",t,{query:{country:r,locale:o,include:n,isFreebie:s,giftCard:c},parentSpan:a},{usePublicAuth:!0})];case 1:return[2,f.sent().json()]}})},r=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=o.apply(e,t);function i(e){s(a,n,r,i,u,"next",e)}function u(e){s(a,n,r,i,u,"throw",e)}i(void 0)})},function(e,t){return r.apply(this,arguments)}),d=function(e,t){var n=(0,u.Z)().fetch,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){var o;o=n[t],t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o})}return e}({},e,(0,c.O)()),r=[l.Z["plans-config.v2"],o];return(0,a.useQuery)(r,function(){return v(o,r,n)},t)}},786884:function(e,t,n){var o=n(827378),r=n(686677),a=n(199729),i=n.n(a),u=n(233169),c=n(427795),l=n(130014),s=n(221527),f=n(283242),v=n(673589),d=n(134930);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,o,r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.code,n=e.shippingAmount,a=e.subTotal,p=e.eventLabel,b=e.trackingData,g=e.isFromUrl,h=e.sku,m=y((0,o.useState)(!0),2),w=m[0],E=m[1],x=(0,d.Z)(t,h),A=y((0,o.useState)(!1),2),O=A[0],S=A[1],P=y((0,o.useState)(null),2),_=P[0],j=P[1],C=(0,c.Z)("senf-notification").translateRaw,T=(0,r.useRouter)(),Z=(0,s.O)(),k=Z.systemCountry,N=Z.locale,B="US"===k,D=(0,l.z)("website").data,F=(0,u.Z)().push,V=i()(D,"locale.currency.code"),I=i()(D,"notifications.voucher.enableRoundDiscountAmount"),L=i()(D,"notifications.voucher.displayCalculatedAmountForPercentage"),R=!B,q=i()(D,"navigationVouchers.disabled"),U=T.asPath.split("?")[0],M=(0,f.fO)(T.query,D),z=(0,v.Z)(1,x,a,n,M,C,N,V,I&&!B,L,R,k).reduce(function(e,t){return"".concat(e," ").concat(t.text)},""),G=(0,o.useMemo)(function(){return[{id:t,name:z,creative:"",position:"1"}]},[t,z]);(0,o.useEffect)(function(){O||S(!0),O&&_!==t&&j(t)},[t,_,O]),(0,o.useEffect)(function(){E(q)},[q]);var Q=!x||!D||w||O&&_===t;return(0,o.useEffect)(function(){Q||(g?F({event:"gaEventTrigger_EE",gaEventAction:"promoView",gaEventCategory:U,gaEventNonInteraction:!0,gaEventLabel:p,data:b,ecommerce:{promoView:{promotions:G}}}):F({event:"gaEventTrigger",event_name:"Voucher_VoucherNotificationDisplay",gaEventAction:"visible",gaEventCategory:"VoucherNotification",gaEventLabel:p,discount_info:b}))},[F,p,g,U,G,b,Q]),(0,o.useEffect)(function(){Q||(g?F({event:"donotTrack",gaEventAction:"promoView",gaEventCategory:U,gaEventNonInteraction:!0,gaEventLabel:p,data:b,ecommerce:{promoView:{promotions:G}}}):F({event:"donotTrack",gaEventAction:"promoView",gaEventCategory:"VoucherNotification",gaEventNonInteraction:!0,gaEventLabel:p,data:b}))},[F,p,g,U,G,b,Q]),null}},799613:function(e,t,n){var o=n(130014),r=n(134930),a=n(427795),i=n(199729),u=n.n(i),c=n(673589),l=n(283242),s=n(916767),f=n(899990),v=n(686677),d=n(221527);t.Z=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3?arguments[3]:void 0,y=arguments.length>4?arguments[4]:void 0,b=arguments.length>5?arguments[5]:void 0,g=(0,r.Z)(e,b),h=(0,o.z)("website").data,m=(0,a.Z)("senf-notification").translateRaw,w=(0,v.useRouter)(),E=(0,d.O)(),x=E.systemCountry,A=E.locale,O=(0,f.Z)(e,t,i,p,b).message,S=u()(h,"locale.currency.code"),P="US"===x,_=!P,j=(0,s.Z)(e,i,t,b),C=(0,s.Z)(e,0,t,b);if(!g||!h)return{gaEventLabel:"",data:void 0};var T=(0,l.fO)(w.query,h),Z=u()(h,"notifications.voucher.enableRoundDiscountAmount"),k=u()(h,"notifications.voucher.displayCalculatedAmountForPercentage"),N=g.customer_status,B=g.order_status,D="all";["new","active","existing"].includes(N)&&["new","active","cancelled"].includes(B)||(D="none"),"cancelled"===B&&(D="reactivation"),("new"===B||"active"===B)&&(D="activation");var F="normal";(0,l.qR)(g)&&(F="annual"),g.repetition_rate&&(F="repetitive");var V=(0,l.dN)(j,A,S),I=(0,l.dN)(C,A,S),L=(0,c.Z)(1,g,t,i,T,m,A,S,Z&&!P,k,_,x),R=null===(n=g.discount_settings.discount_rule.box_rule[1])||void 0===n?void 0:n.applicable_to;1===(0,l.T3)(g)&&t<=j&&t<=0&&"Freebies"===g.partner&&(O=m("senf-notification.voucher.freebie-datalayer",{isFreeShipping:"shipping"===R||"both"===R}));var q={type:g.voucher_type,discountType:g.discount_type,frequency:F,userType:D,code:g.code,amount:g.discount_value,boxesAmount:"annual"!==F?L.map(function(e){return e.text?e.text:"0"}).join(","):null,totalDiscount:V,totalBoxes:(0,l.sj)(g),discount:I,shippingAmount:i/100,addShippingToTotal:T,message:O,fromInputField:!y};return{gaEventLabel:[q.type,q.userType,q.discountType,q.amount,q.code,q.frequency,"totalBoxes:".concat(q.totalBoxes),"totalDiscount:".concat(q.totalDiscount),q.totalBoxes>1?q.boxesAmount:""].join("-"),data:q}}},673589:function(e,t,n){var o=n(941571),r=n.n(o),a=n(283242);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){var o;o=n[t],t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o})}return e}var u=function(e,t,n,o,r,i){if(!e)return"";var u=(0,a.dN)(e,t,n);return o&&i?r?i("senf-notification.voucher.percentage-off",{amount:e}):i("senf-notification.voucher.amount-off",{amount:u}):u};t.Z=function(e,t,n,o,c,l,s,f,v,d){var p=!(arguments.length>10)||void 0===arguments[10]||arguments[10],y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,b="US"===y,g=(0,a.T3)(t),h=0;e?h=g<e?e:g:h+=1;var m=i({discount:!1,hasFutureBoxes:!1,text:""},b&&{discountAmount:"",boxPrice:"",discountedBoxPrice:"",freeBox:!1});return r()(Math.min(h,12),function(){return m}).map(function(e,r){var y=(0,a.CP)({voucher:t,index:r+1,subTotal:n,addShipping:c,shippingAmount:o,roundDiscountAmount:v,shouldCalculatePercentageAmount:d})/100,h=n+o/100,m=h-y>0?h-y:0,w=!b&&!d&&"percent"===t.discount_type,E=y>=n&&"fixed"===t.discount_type||b&&0===m,x=u(y,s,f,p,w,l),A=u(y,s,f,p,w),O=u(h,s,f,!1,!1),S=u(m,s,f,!1,!1),P=i({discount:!!A,hasFutureBoxes:r+1===12&&g>12,text:x||""},b&&{discountAmount:A,boxPrice:O,discountedBoxPrice:S,freeBox:E});return E&&(P.text=l("senf-notification.voucher.free")),P})}}}]);